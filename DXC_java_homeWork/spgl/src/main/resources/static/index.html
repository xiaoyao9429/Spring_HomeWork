<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品管理系统</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 头部 -->
    <header class="header">
        <div class="container">
            <h1>商品管理系统</h1>
        </div>
    </header>

    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <ul>
                <li><a href="index.html">首页</a></li>
                <li><a href="product-list.html">商品列表</a></li>
                <li><a href="manage-products.html">管理商品</a></li>
            </ul>
        </div>
    </nav>

    <!-- 主内容 -->
    <main class="main">
        <div class="container">
            <h2>欢迎使用商品管理系统</h2>
            <!-- 商品展示 -->
            <section class="featured-products">
                <h3>热门商品</h3>
                <div class="product-grid">
                    <!-- 商品卡片1 -->
                    <div class="product-card">
                        <div class="product-image">📱</div>
                        <div class="product-info">
                            <h4 class="product-name">智能手机</h4>
                            <p class="product-price">¥2999.00</p>
                            <p class="product-description">高清屏幕，强大性能，长续航</p>
                            <p class="product-stock">库存: 50</p>
                            <a href="product-detail.html?id=1" class="btn">查看详情</a>
                        </div>
                    </div>

                    <!-- 商品卡片2 -->
                    <div class="product-card">
                        <div class="product-image">💻</div>
                        <div class="product-info">
                            <h4 class="product-name">笔记本电脑</h4>
                            <p class="product-price">¥5999.00</p>
                            <p class="product-description">轻薄便携，高性能处理器</p>
                            <p class="product-stock">库存: 30</p>
                            <a href="product-detail.html?id=2" class="btn">查看详情</a>
                        </div>
                    </div>

                    <!-- 商品卡片3 -->
                    <div class="product-card">
                        <div class="product-image">🎧</div>
                        <div class="product-info">
                            <h4 class="product-name">无线耳机</h4>
                            <p class="product-price">¥899.00</p>
                            <p class="product-description">降噪功能，优质音质</p>
                            <p class="product-stock">库存: 100</p>
                            <a href="product-detail.html?id=3" class="btn">查看详情</a>
                        </div>
                    </div>

                    <!-- 商品卡片4 -->
                    <div class="product-card">
                        <div class="product-image">⌚</div>
                        <div class="product-info">
                            <h4 class="product-name">智能手表</h4>
                            <p class="product-price">¥1299.00</p>
                            <p class="product-description">健康监测，运动追踪</p>
                            <p class="product-stock">库存: 45</p>
                            <a href="product-detail.html?id=4" class="btn">查看详情</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 商品管理系统.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 获取商品列表
            fetch('http://localhost:8080/products')
                .then(response => response.json())
                .then(data => {
                    if (data.code === 200) {
                        const products = data.data;
                        const productGrid = document.querySelector('.product-grid');
                        
                        // 清空现有商品卡片
                        productGrid.innerHTML = '';
                        
                        // 只显示前4个商品作为热门商品
                        const featuredProducts = products.slice(0, 4);
                        
                        // 动态生成商品卡片
                        featuredProducts.forEach(product => {
                            const productCard = document.createElement('div');
                            productCard.className = 'product-card';
                            
                            // 使用商品实际图片
                            const imagePath = `photo/${product.product_image}`;
                            
                            productCard.innerHTML = `
                                <div class="product-image">
                                    <img src="${imagePath}" alt="${product.name}" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div class="product-info">
                                    <h4 class="product-name">${product.name}</h4>
                                    <p class="product-price">¥${product.price.toFixed(2)}</p>
                                    <p class="product-description">${product.description.substring(0, 50)}...</p>
                                    <p class="product-stock">库存: ${product.stock}</p>
                                    <a href="product-detail.html?id=${product.id}" class="btn">查看详情</a>
                                </div>
                            `;
                            
                            productGrid.appendChild(productCard);
                        });
                    } else {
                        console.error('获取商品列表失败:', data.msg);
                    }
                })
                .catch(error => {
                    console.error('获取商品列表时发生错误:', error);
                });
        });
    </script>
</body>
</html>